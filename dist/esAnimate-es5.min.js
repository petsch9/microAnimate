"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function(a){var b=function(){function b(a){function c(a,b,c){function d(a){var b=[];return a.forEach(function(a){"object"===("undefined"==typeof a?"undefined":_typeof(a))&&b.push(a)}),b}function e(a,b,c){var d=[],e="";return e=c===!0||"string"==typeof c?"string"==typeof c?" "+c:" ease":" linear",a.forEach(function(c,f){if("object"===("undefined"==typeof c?"undefined":_typeof(c))){var g=void 0;g="undefined"!=typeof a?a[f][0]+" "+b+e:"",d.push(g)}}),d}function f(a){var b=void 0;return a.forEach(function(a){"function"==typeof a&&(b=a)}),b}var g={initial:{},index:Object.keys(a)};return g.initial.styles=d(a[0],a[0]),g.index.forEach(function(b,h){g[b]={};var i=(a[g.index[h+1]],(c.duration*(g.index[h]-g.index[h-1])/100/1e3||0)+"s");g[b].styles=d(a[b]),g[b].transition=e(a[b],i,c.ease),g[b].callback=f(a[b])}),g}function d(a){var b=[],c={};return Object.keys(a).forEach(function(b){"from"===b?(a["0%"]=a[b],delete a[b]):"to"===b&&(a["100%"]=a[b],delete a[b])}),b=Object.keys(a),b.forEach(function(a,c){b[c]=parseInt(a.replace("%",""))}),b.sort(),b.forEach(function(b){c[b]=a[b+"%"]}),c}var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],f=arguments.length<=2||void 0===arguments[2]?{duration:2e3,ease:!0,retainEndState:!0,loop:0}:arguments[2];_classCallCheck(this,b),this.element=a,this.options=f,this.data={tickLength:16,action:0},this.data.tickTotal=Math.ceil(f.duration/this.data.tickLength),this.animation=c(d(e),this.data,this.options),this.interval=null}return _createClass(b,[{key:"reset",value:function(a){a.style.cssText=""}},{key:"kill",value:function(b){a.clearInterval(this.interval),this.interval=null,this.options.retainEndState&&!b||this.reset(this.element)}},{key:"start",value:function(){function b(){if(j.relativePercentage=Math.round(100/j.tickTotal*j.tickCurrent),0===l.length)m.current<m.max?(h.reset(h.element),f(),m.current++,b()):this.kill.apply(this,[!1]);else{if(j.relativePercentage>k){var n=i[k],o=i[l[1]]||i[0];l.shift(),k=Math.min.apply(Math,l),d(h.element,o.transition),c(h.element,o.styles),"undefined"!=typeof n.callback&&e(n.callback,h)}j.tickCurrent++,0===j.action?h.interval=a.setTimeout(function(){a.requestAnimationFrame(b)},j.tickLength):1===j.action&&g()}}function c(a,b){if("undefined"!=typeof b)for(var c=0;c<b.length;c++)a.style[b[c][0]]=b[c][1]}function d(a,b){"undefined"!=typeof b&&(a.style.transition=b.join(", "))}function e(a,b){a(b)}function f(){k=0,l=Array.from(i.index),j.tickCurrent=0,j.relativePercentage=0,j.action=0,c(h.element,i.initial.styles)}function g(){h.interval=a.setInterval(function(){2===j.action&&(j.action=0,a.clearInterval(h.interval),a.requestAnimationFrame(b))},2*j.tickLength)}null!==this.interval&&this.kill.apply(this,[!0]);var h=this,i=h.animation,j=h.data,k=void 0,l=void 0,m={current:1,max:"boolean"==typeof this.options.loop?this.options.loop?1/0:0:this.options.loop};j.relativePercentage=0,j.tickCurrent=0,this.reset(h.element),f(),b(h)}},{key:"pause",value:function(){this.data.action=1}},{key:"unpause",value:function(){1===this.data.action&&(this.data.action=2)}},{key:"stop",value:function(){this.kill.apply(this,[!0])}}]),b}();a.microAnimate=b,a.Anim=b}(window);